(function(){var e={1881:function(e,t,i){"use strict";var n=i(6369),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e._m(0),t("div",{staticClass:"main flexColumn"},[t("div",{staticClass:"flexRowCenterAll",staticStyle:{width:"100%",height:"10rem",margin:"1rem 0","justify-content":"space-around"}},[t("div",{staticClass:"flexColumnCenterAll",staticStyle:{cursor:"pointer"},on:{click:function(t){e.howToUseVis=!0}}},[t("i",{staticClass:"el-icon-question",staticStyle:{color:"#409EFF","font-size":"3rem"}}),t("br"),t("span",[e._v("点我查看使用方法")])]),t("div",{staticClass:"flexColumnCenterAll",staticStyle:{cursor:"pointer"},on:{click:()=>{!this.token&&(this.keySet=!0)}}},[e.token?t("i",{staticClass:"el-icon-check",staticStyle:{color:"#67C23A","font-size":"3rem"}}):t("i",{staticClass:"el-icon-close",staticStyle:{color:"red","font-size":"2rem"}}),t("br"),t("span",{style:{color:e.token?"#67C23A":"red"}},[e._v(e._s(e.token?"已设置 Token":"未设置 Token"))])]),t("div",{staticClass:"flexColumnCenterAll",staticStyle:{cursor:"pointer"},on:{click:function(t){e.keySet=!0}}},[t("i",{staticClass:"el-icon-setting",staticStyle:{color:"#409EFF","font-size":"3rem"}}),t("br"),t("span",[e._v("点我设置你的token")])])]),t("el-divider"),t("el-input",{staticStyle:{width:"90vw","margin-bottom":"1rem"},attrs:{disabled:e.inputDis,type:"text",placeholder:"如果需要存在某个文件夹下请输入文件夹的相对路径","placeholder-style":"color:red"},model:{value:e.fileBolder,callback:function(t){e.fileBolder=t},expression:"fileBolder"}}),t("el-upload",{ref:"upload",staticClass:"upload-demo flexColumnCenterAll",attrs:{drag:"",action:e.action,"auto-upload":!1,"on-change":e.handleChange,"http-request":e.handleRequest,multiple:!0,"list-type":"picture"},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("i",{staticClass:"el-icon--upload el-icon-plus",staticStyle:{"font-size":"3rem"}}),t("div",{staticClass:"el-upload__text"},[e._v(" 拖拽至此或点击选择上传 ")])]},proxy:!0},{key:"file",fn:function(i){return[e.isPageVis?t("div",{staticClass:"fileListItem flexColumn"},[t("div",{staticClass:"fileInfo flexRow"},[t("div",{staticClass:"fileImg flexRowCenterAll"},[i.file.raw.type.includes("image")?t("i",{staticClass:"el-icon-picture"}):e._e(),i.file.raw.type.includes("video")?t("i",{staticClass:"el-icon-video-camera-solid"}):e._e()]),t("span",{staticClass:"fileName ellipsis"},[e._v(" "+e._s(i.file.name)+" ")])]),e.showPercent?t("br"):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPercent,expression:"showPercent"}],staticClass:"filePercent"},[e.filesJson[i.file.uid]<100?t("el-progress",{attrs:{percentage:e.filesJson[i.file.uid]}}):e._e(),100===e.filesJson[i.file.uid]?t("div",{staticClass:"uploadSuccess flexRow"},[t("i",{staticClass:"el-icon-check",staticStyle:{color:"#67C23A","font-size":"3rem"}})]):e._e()],1)]):e._e()]}}])},[t("el-button",{staticStyle:{margin:"1rem 0"},attrs:{type:"success",size:"large"},on:{click:e.submitUpload}},[e._v(" 点我提交上传 ")])],1)],1),t("el-drawer",{attrs:{title:"使用方法",visible:e.howToUseVis,direction:"btt"},on:{"update:visible":function(t){e.howToUseVis=t}}},[t("p",{staticClass:"upP"},[e._v("1.找到手机设置中设备的序列号并且复制")]),t("p",{staticClass:"upP"},[e._v("2.点击页面上的设置Token")]),t("p",{staticClass:"upP"},[e._v("3.输入Token并提交")]),t("br"),t("p",{staticClass:"upP"},[e._v("作者联系方式：19857191790")])]),t("el-drawer",{attrs:{title:"设置Token",visible:e.keySet,direction:"btt"},on:{"update:visible":function(t){e.keySet=t}}},[t("el-form",{ref:"keySetRef",attrs:{model:e.keySetForm,rules:e.keySetRules}},[t("el-form-item",{attrs:{prop:"key"}},[t("el-input",{attrs:{size:"large",placeholder:"请输入Token"},model:{value:e.keySetForm.key,callback:function(t){e.$set(e.keySetForm,"key",t)},expression:"keySetForm.key"}})],1),t("el-form-item",{attrs:{align:"center"}},[t("el-button",{on:{click:function(t){e.keySet=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(" 确认 ")])],1)],1)],1)],1)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header flexRowCenterAll"},[t("div",{staticClass:"flexRowCenterAll"},[t("img",{attrs:{src:"https://scdn.shanxingqiu.com/static/avatar.jpeg?imageView2/1/w/80/h/80",alt:""}}),t("span",[e._v("善星球公益发展中心出品")])])])}],r=i(7357),a=i(8082);const l="IAM-F5yqfl0mN9zferTQMsaZP_pf8tsnXbz4YVJWJMEM",c="gjnAWqegg3V37pitU-aRojQxdiwFfnFd5UrRwxCqOvyB",u="city-best-all";function f(e,t){const i=d(l,c,u),n=`${t?t+"/":""}${e.name}`,s={useCdnDomain:!0,region:r.KM.z0,forceDirect:!1,chunkSize:64},o={fname:e.name,mimeType:null};return r.ws(e,n,i,o,s)}function d(e,t,i){var n={scope:i,deadline:3600+Math.floor(Date.now()/1e3)},s=h(p(JSON.stringify(n))),o=a.HmacSHA1(s,t),r=o.toString(a.enc.Base64).replace(/\//g,"_").replace(/\+/g,"-"),l=e+":"+r+":"+s;return l}function h(e){var t,i,n,s,o,r;n=e.length,i=0,t="";var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";while(i<n){if(s=255&e.charCodeAt(i++),i===n){t+=a.charAt(s>>2),t+=a.charAt((3&s)<<4),t+="==";break}if(o=e.charCodeAt(i++),i===n){t+=a.charAt(s>>2),t+=a.charAt((3&s)<<4|(240&o)>>4),t+=a.charAt((15&o)<<2),t+="=";break}r=e.charCodeAt(i++),t+=a.charAt(s>>2),t+=a.charAt((3&s)<<4|(240&o)>>4),t+=a.charAt((15&o)<<2|(192&r)>>6),t+=a.charAt(63&r)}return t}function p(e){var t,i,n,s;for(t="",n=e.length,i=0;i<n;i++)s=e.charCodeAt(i),s>=1&&s<=127?t+=e.charAt(i):s>2047?(t+=String.fromCharCode(224|s>>12&15),t+=String.fromCharCode(128|s>>6&63),t+=String.fromCharCode(128|s>>0&63)):(t+=String.fromCharCode(192|s>>6&31),t+=String.fromCharCode(128|s>>0&63));return t}var m=i(680);const y="token";function v(){return m.Z.get(y)}function g(e){return m.Z.set(y,e)}var k=i(1107);const C="https://mmihcimimkunstklrlny.supabase.co",b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1taWhjaW1pbWt1bnN0a2xybG55Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTU4NzA3NTEsImV4cCI6MjAxMTQ0Njc1MX0.uNcPjnsLI9YDgIMMniFbWc3Lou-fm0bMLOyOdwAkuAc",S=(0,k.eI)(C,b);async function w(e){const t=await S.from("tokens").select("*").eq("id",e);return t}var _={data(){return{token:v()||"",keySetForm:{key:""},inputDis:!1,fileBolder:"",action:"https://up-z0.qiniup.com",filesJson:{total:0},showPercent:!1,uploadedTotal:0,keySet:!1,howToUseVis:!1,keySetRules:{key:[{required:!0,message:"请输入Token",trigger:"blur"}]},isPageVis:!0}},watch:{uploadedTotal(e){e===this.filesJson.total&&(this.inputDis=!1)}},created(){this.token&&this.getTOkenSSS(),document.addEventListener("visibilitychange",this.handleVisibilityChange)},destroyed(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)},methods:{handleVisibilityChange(){console.log(document.visibilityState),"visible"===document.visibilityState?this.isPageVis=!0:this.isPageVis=!1},async getTOkenSSS(){await w(this.token)},handleChange(e){this.filesJson[e.uid]||"ready"!==e.status||(this.filesJson[e.uid]=0,this.filesJson.total+=1,console.log(this.filesJson,"filesJson"))},async handleRequest(e){let t=e.file.uid;this.showPercent=!0,this.inputDis=!0,await f(e.file,this.fileBolder).subscribe({next:e=>{console.log(e,this.filesJson);let i=parseInt(e.total.percent.toFixed(0));this.filesJson[t]=i,this.$forceUpdate()},error:e=>{this.$message({message:`${e.name} ${e.message}`,type:"error",duration:5e3}),this.showPercent=!1},complete:e=>{this.uploadedTotal++,this.$message({message:`'文件${e.key}'上传成功`,type:"success",duration:5e3})}})},async submitForm(){if(""!==this.keySetForm.key){const e=await w(this.keySetForm.key);console.log(e),200==e.status&&0!==e.data.length?(g(this.keySetForm.key),this.token=v()||"",this.keySet=!1,this.$message({message:"设置Token成功",type:"success",duration:5e3})):this.$message.error(`设置Token失败,${e.error||""}`)}},submitUpload(){this.token?this.$refs.upload.submit():this.$message.error("请先设置Token")}}},x=_,A=i(1001),O=(0,A.Z)(x,s,o,!1,null,"15d776e2",null),T=O.exports,P=i(8499),j=i.n(P);n["default"].config.productionTip=!1,n["default"].use(j()),new n["default"]({render:e=>e(T)}).$mount("#app");const I=()=>{let e=document.documentElement,t=e.clientWidth/120>12?e.clientWidth/120:12;e.style.fontSize=t+"px"};I(),window.onresize=I},2480:function(){}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,n,s,o){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],o=e[u][2];for(var a=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,s,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};i.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var o=Object.create(null);i.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){r[e]=function(){return n[e]}}));return r["default"]=function(){return n},i.d(o,r),o}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,r=n[0],a=n[1],l=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var u=l(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},n=self["webpackChunkdemo"]=self["webpackChunkdemo"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(1881)}));n=i.O(n)})();
//# sourceMappingURL=app.79684426.js.map